# Claude Model Switcher - AIæ¨¡å‹ç®¡ç†ä¸“å®¶

> ğŸš€ **Claude Model Switcher v5.0.0** - ä¸“ä¸šçº§Claude Codeå¤šæ¨¡å‹ç®¡ç†è§£å†³æ–¹æ¡ˆ

ä¸€ä¸ªé‡‡ç”¨**æ¨¡å—åŒ–æ¶æ„**è®¾è®¡çš„Claude Codeå®‰è£…å™¨å’Œå¤šæ¨¡å‹ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸ºå¼€å‘å›¢é˜Ÿå’Œä¸ªäººå¼€å‘è€…è®¾è®¡ï¼Œæä¾›ä¼ä¸šçº§çš„æ¨¡å‹ç®¡ç†ä½“éªŒã€‚

## ğŸ¯ è§£å†³çš„æ ¸å¿ƒé—®é¢˜

### åœºæ™¯ç—›ç‚¹
- **å¤šæ¨¡å‹åˆ‡æ¢å›°éš¾**ï¼šä¸åŒåœºæ™¯éœ€è¦ä¸åŒAIæ¨¡å‹ï¼Œæ‰‹åŠ¨åˆ‡æ¢ç¹ç
- **é…ç½®å¤æ‚**ï¼šæ¯ä¸ªæ¨¡å‹éƒ½æœ‰ç‹¬ç«‹çš„APIå¯†é’¥å’Œé…ç½®å‚æ•°
- **ç‰ˆæœ¬ç®¡ç†æ··ä¹±**ï¼šæ— æ³•è¿½è¸ªå’Œå›æ»šæ¨¡å‹é…ç½®å˜æ›´
- **å›¢é˜Ÿåä½œå›°éš¾**ï¼šå›¢é˜Ÿæˆå‘˜ä½¿ç”¨ä¸åŒæ¨¡å‹é…ç½®ï¼Œå¯¼è‡´ç»“æœä¸ä¸€è‡´
- **å®‰è£…éƒ¨ç½²å¤æ‚**ï¼šæ–°æ‰‹ç”¨æˆ·éš¾ä»¥æ­£ç¡®å®‰è£…å’Œé…ç½®Claude Code

### è§£å†³æ–¹æ¡ˆ
- âœ… **ä¸€é”®åˆ‡æ¢**ï¼š3ç§’å†…å®Œæˆæ¨¡å‹åˆ‡æ¢
- âœ… **é…ç½®é›†ä¸­ç®¡ç†**ï¼šæ‰€æœ‰æ¨¡å‹é…ç½®ç»Ÿä¸€ç®¡ç†ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶
- âœ… **å›¢é˜Ÿåä½œ**ï¼šå…±äº«æ¨¡å‹é…ç½®ï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒè®¾ç½®
- âœ… **è‡ªåŠ¨åŒ–å®‰è£…**ï¼šä¸€é”®å®ŒæˆClaude CodeåŠå…¶ä¾èµ–çš„å®‰è£…
- âœ… **ä¼ä¸šçº§å®‰å…¨**ï¼šAPIå¯†é’¥å®‰å…¨å­˜å‚¨ï¼Œæ”¯æŒå›¢é˜Ÿæƒé™ç®¡ç†

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **æ¨¡å—åŒ–æ¶æ„**ï¼šæ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹æˆæ¨¡å—ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰è®¾ç½®å¤–éƒ¨åŒ–ï¼Œæ”¯æŒçƒ­æ›´æ–°
- **æµ‹è¯•ä¼˜å…ˆ**ï¼šå®Œæ•´çš„TDD/BDDæµ‹è¯•æ¡†æ¶
- **é›¶ä¾èµ–éƒ¨ç½²**ï¼šçº¯Shellè„šæœ¬ï¼Œæ— éœ€é¢å¤–ä¾èµ–

### æŠ€æœ¯æ ˆ
```
â”œâ”€â”€ Shellè„šæœ¬ (Bash/Zshå…¼å®¹)
â”œâ”€â”€ é…ç½®æ–‡ä»¶ (INIæ ¼å¼ï¼Œæ˜“äºç¼–è¾‘)
â”œâ”€â”€ æµ‹è¯•æ¡†æ¶ (è‡ªå®šä¹‰BDDæµ‹è¯•)
â”œâ”€â”€ æ—¥å¿—ç³»ç»Ÿ (ç»“æ„åŒ–æ—¥å¿—)
â””â”€â”€ æ¨¡å—ç³»ç»Ÿ (åŠ¨æ€åŠ è½½)
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
claude-model-switcher/
â”œâ”€â”€ ğŸ“‹ main.sh                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ âš™ï¸ config/                    # é…ç½®ä¸­å¿ƒ
â”‚   â”œâ”€â”€ app.conf                 # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ models.conf              # æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ providers.conf           # æä¾›å•†é…ç½®
â”œâ”€â”€ ğŸ”§ lib/                      # æ ¸å¿ƒæ¨¡å—åº“
â”‚   â”œâ”€â”€ core/                    # åŸºç¡€æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ logger.sh           # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ config_loader.sh    # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ validator.sh        # æ•°æ®éªŒè¯
â”‚   â”œâ”€â”€ installers/             # å®‰è£…æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ nodejs_installer.sh # Node.jsç®¡ç†
â”‚   â”‚   â””â”€â”€ claude_installer.sh # Claudeå®‰è£…
â”‚   â””â”€â”€ managers/               # ä¸šåŠ¡æ¨¡å—
â”‚       â””â”€â”€ model_manager.sh    # æ¨¡å‹ç®¡ç†
â”œâ”€â”€ ğŸ§ª tests/                   # æµ‹è¯•æ¡†æ¶
â”‚   â”œâ”€â”€ test_runner.sh         # æµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ bdd/                   # åœºæ™¯æµ‹è¯•
â”œâ”€â”€ ğŸ“š docs/                   # æ–‡æ¡£ç›®å½•
â””â”€â”€ ğŸ“ README.md               # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå…¥é—¨

### 1. ä¸€é”®å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/claude-model-switcher.git
cd claude-model-switcher

# å¯é€‰ï¼šè‡ªå®šä¹‰å®‰è£…ç›®å½•ï¼ˆé»˜è®¤ä¸º /root/claude-model-switcherï¼‰
export CLAUDE_INSTALL_DIR="/your/custom/path"

# æ‰§è¡Œå®‰è£…
chmod +x install.sh
./install.sh

# éªŒè¯å®‰è£…
list_models
```

### 2. åŸºç¡€ä½¿ç”¨

```bash
# æŸ¥çœ‹å¯ç”¨æ¨¡å‹
list_models

# åˆ‡æ¢åˆ°Kimiæ¨¡å‹
use_model kimi

# ä½¿ç”¨Claude Code
claude "è¯·å¸®æˆ‘åˆ†æè¿™æ®µä»£ç "

# åˆ‡æ¢åˆ°GPT-4
use_model gpt4
```

### 3. é«˜çº§åŠŸèƒ½

```bash
# æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
$CLAUDE_INSTALL_DIR/main.sh status

# æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹
$CLAUDE_INSTALL_DIR/main.sh add-model \
  "custom-model" \
  "openai" \
  "gpt-4-turbo-preview" \
  "https://api.openai.com/v1"

# æ‰¹é‡ç®¡ç†æ¨¡å‹
$CLAUDE_INSTALL_DIR/main.sh batch-update
```

## âš™ï¸ é…ç½®è¯¦è§£

### 1. åº”ç”¨é…ç½® (config/app.conf)

```bash
# åŸºç¡€è®¾ç½®
APP_NAME="Claude Model Switcher"
APP_VERSION="5.0.0"
INSTALL_DIR="${CLAUDE_INSTALL_DIR:-/root/claude-model-switcher}"

# æ—¥å¿—é…ç½®
LOG_LEVEL="INFO"
LOG_FILE="$INSTALL_DIR/logs/app.log"
MAX_LOG_SIZE="10M"

# æ€§èƒ½è®¾ç½®
CACHE_TTL=3600
PARALLEL_JOBS=4
TIMEOUT_SECONDS=30
```

### 2. æ¨¡å‹é…ç½® (config/models.conf)

```bash
# Kimiæ¨¡å‹
[kimi]
provider="moonshot"
api_name="kimi-k2-turbo-preview"
context_length="128K"
max_tokens=4096
temperature=0.6

# GPT-4
[gpt4]
provider="openai"
api_name="gpt-4-turbo-preview"
context_length="128K"
max_tokens=4096
temperature=0.7

# Claude 3.5 Sonnet
[claude35]
provider="anthropic"
api_name="claude-3-5-sonnet-20241022"
context_length="200K"
max_tokens=4096
temperature=0.7
```

### 3. æä¾›å•†é…ç½® (config/providers.conf)

```bash
# Moonshot (Kimi)
[moonshot]
base_url="https://api.moonshot.cn/anthropic/"
api_key_env="MOONSHOT_API_KEY"
rate_limit=60

# OpenAI
[openai]
base_url="https://api.openai.com/v1"
api_key_env="OPENAI_API_KEY"
rate_limit=100

# Anthropic
[anthropic]
base_url="https://api.anthropic.com"
api_key_env="ANTHROPIC_API_KEY"
rate_limit=50
```

## ğŸ§ª æµ‹è¯•é©±åŠ¨å¼€å‘

### æµ‹è¯•æ¡†æ¶ç‰¹æ€§
- âœ… **å•å…ƒæµ‹è¯•**ï¼šæ¯ä¸ªå‡½æ•°ç‹¬ç«‹æµ‹è¯•
- âœ… **é›†æˆæµ‹è¯•**ï¼šæ¨¡å—é—´åä½œéªŒè¯
- âœ… **BDDåœºæ™¯**ï¼šç”¨æˆ·æ•…äº‹é©±åŠ¨æµ‹è¯•
- âœ… **æ€§èƒ½æµ‹è¯•**ï¼šå“åº”æ—¶é—´å’Œèµ„æºä½¿ç”¨
- âœ… **å®‰å…¨æµ‹è¯•**ï¼šè¾“å…¥éªŒè¯å’Œæƒé™æ§åˆ¶

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./tests/test_runner.sh

# è¿è¡Œç‰¹å®šç±»å‹æµ‹è¯•
./tests/test_runner.sh unit           # å•å…ƒæµ‹è¯•
./tests/test_runner.sh integration    # é›†æˆæµ‹è¯•
./tests/test_runner.sh bdd           # åœºæ™¯æµ‹è¯•

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
./tests/test_runner.sh tests/unit/test_model_manager.sh

# è°ƒè¯•æ¨¡å¼è¿è¡Œæµ‹è¯•
DEBUG=1 ./tests/test_runner.sh
```

### æµ‹è¯•æ–­è¨€åº“

```bash
# æ–­è¨€æˆåŠŸ
assert_success "åº”è¯¥æˆåŠŸåˆ‡æ¢æ¨¡å‹" "use_model kimi"

# æ–­è¨€å¤±è´¥
assert_failure "åº”è¯¥æ‹’ç»æ— æ•ˆæ¨¡å‹" "use_model invalid-model"

# æ–­è¨€è¾“å‡ºåŒ…å«
assert_contains "è¾“å‡ºåº”åŒ…å«æ¨¡å‹åç§°" "$(list_models)" "kimi"

# æ–­è¨€æ–‡ä»¶å­˜åœ¨
assert_file_exists "é…ç½®æ–‡ä»¶åº”å­˜åœ¨" "$HOME/.claude/config/models.conf"
```

## ğŸ”§ å¼€å‘æŒ‡å—

### 1. æ¨¡å—å¼€å‘è§„èŒƒ

#### æ¨¡å—ç»“æ„æ¨¡æ¿
```bash
#!/bin/bash
# Module: my_module.sh
# Purpose: æè¿°æ¨¡å—ç”¨é€”
# Version: 1.0.0

# æ¨¡å—çŠ¶æ€
MODULE_NAME="my_module"
MODULE_VERSION="1.0.0"
MODULE_ENABLED=true

# æ¨¡å—åˆå§‹åŒ–
my_module_init() {
    log_info "åˆå§‹åŒ– $MODULE_NAME v$MODULE_VERSION"
    # åˆå§‹åŒ–é€»è¾‘
}

# ä¸»è¦åŠŸèƒ½å‡½æ•°
my_module_main_function() {
    local param1="$1"
    local param2="$2"
    
    # è¾“å…¥éªŒè¯
    validate_input "$param1" || return 1
    
    # æ ¸å¿ƒé€»è¾‘
    # ...
    
    # ç»“æœè¿”å›
    echo "å¤„ç†ç»“æœ"
}

# æ¸…ç†å‡½æ•°
my_module_cleanup() {
    log_debug "æ¸…ç† $MODULE_NAME èµ„æº"
    # æ¸…ç†é€»è¾‘
}
```

### 2. é…ç½®æ‰©å±•

#### æ·»åŠ æ–°æ¨¡å‹
```bash
# 1. ç¼–è¾‘ config/models.conf
[new-model]
provider="new-provider"
api_name="new-model-name"
context_length="32K"
max_tokens=2048

# 2. æ·»åŠ æä¾›å•†é…ç½®
[new-provider]
base_url="https://api.new-provider.com"
api_key_env="NEW_PROVIDER_API_KEY"
rate_limit=100

# 3. è¿è¡Œæµ‹è¯•éªŒè¯
./tests/test_runner.sh integration/test_new_model.sh
```

#### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—
```bash
# 1. åˆ›å»ºæ¨¡å—æ–‡ä»¶
lib/managers/new_feature_manager.sh

# 2. å®ç°æ¨¡å—æ¥å£
new_feature_init()
new_feature_main()
new_feature_cleanup()

# 3. æ·»åŠ åˆ°ä¸»ç¨‹åº
# åœ¨ main.sh ä¸­æ·»åŠ ï¼š
source "lib/managers/new_feature_manager.sh"

# 4. ç¼–å†™æµ‹è¯•
tests/unit/test_new_feature_manager.sh
```

### 3. è°ƒè¯•å·¥å…·

```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
export DEBUG=1
export LOG_LEVEL=DEBUG

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f $CLAUDE_INSTALL_DIR/logs/debug.log

# æ€§èƒ½åˆ†æ
time $CLAUDE_INSTALL_DIR/main.sh list_models

# å†…å­˜ä½¿ç”¨ç›‘æµ‹
./tests/test_runner.sh performance
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥
```bash
# é…ç½®ç¼“å­˜
CACHE_TTL=3600          # 1å°æ—¶ç¼“å­˜
CACHE_SIZE=100MB        # æœ€å¤§ç¼“å­˜å¤§å°
CACHE_DIR="$HOME/.claude/cache"

# æ‰‹åŠ¨æ¸…ç†ç¼“å­˜
$CLAUDE_INSTALL_DIR/main.sh cache-clear
```

### 2. å¹¶è¡Œå¤„ç†
```bash
# æ‰¹é‡æ¨¡å‹æ£€æµ‹
PARALLEL_JOBS=4
$CLAUDE_INSTALL_DIR/main.sh batch-check
```

### 3. å†…å­˜ä¼˜åŒ–
```bash
# é™åˆ¶å†…å­˜ä½¿ç”¨
MAX_MEMORY=512MB
$CLAUDE_INSTALL_DIR/main.sh optimize-memory
```

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### 1. APIå¯†é’¥ç®¡ç†
```bash
# å®‰å…¨å­˜å‚¨APIå¯†é’¥
export MOONSHOT_API_KEY="your-key-here"
export OPENAI_API_KEY="your-key-here"

# ä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡
$CLAUDE_INSTALL_DIR/main.sh setup-key-manager
```

### 2. æƒé™æ§åˆ¶
```bash
# è®¾ç½®æ–‡ä»¶æƒé™
chmod 600 ~/.claude/config/providers.conf
chmod 755 $CLAUDE_INSTALL_DIR/main.sh

# ç”¨æˆ·æƒé™ç®¡ç†
$CLAUDE_INSTALL_DIR/main.sh setup-user-permissions
```

### 3. å®¡è®¡æ—¥å¿—
```bash
# æŸ¥çœ‹æ“ä½œæ—¥å¿—
$CLAUDE_INSTALL_DIR/main.sh audit-log

# å®‰å…¨æ‰«æ
$CLAUDE_INSTALL_DIR/main.sh security-scan
```

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### 1. å•æœºéƒ¨ç½²
```bash
# æ ‡å‡†å®‰è£…
./install.sh

# Dockeréƒ¨ç½²
docker run -it \
  -v ~/.claude:/root/.claude \
  claude-model-switcher:latest
```

### 2. å›¢é˜Ÿéƒ¨ç½²
```bash
# å…±äº«é…ç½®éƒ¨ç½²
$CLAUDE_INSTALL_DIR/main.sh team-setup \
  --config-repo "git@github.com:team/claude-config.git" \
  --shared-models "kimi,gpt4,claude35"

# æƒé™ç®¡ç†
$CLAUDE_INSTALL_DIR/main.sh setup-team-permissions \
  --admin-users "alice,bob" \
  --readonly-users "charlie,david"
```

### 3. CI/CDé›†æˆ
```yaml
# GitHub Actionsç¤ºä¾‹
name: Claude Model Switcher CI
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Tests
        run: |
          ./tests/test_runner.sh
          $CLAUDE_INSTALL_DIR/main.sh security-scan
```

## ğŸ“ˆ ç›‘æ§å’Œè¿ç»´

### 1. ç³»ç»Ÿç›‘æ§
```bash
# å®æ—¶çŠ¶æ€
$CLAUDE_INSTALL_DIR/main.sh status --real-time

# æ€§èƒ½æŒ‡æ ‡
$CLAUDE_INSTALL_DIR/main.sh metrics

# å¥åº·æ£€æŸ¥
$CLAUDE_INSTALL_DIR/main.sh health-check
```

### 2. å‘Šè­¦é…ç½®
```bash
# è®¾ç½®å‘Šè­¦é˜ˆå€¼
$CLAUDE_INSTALL_DIR/main.sh setup-alerts \
  --api-timeout 30 \
  --error-rate 5% \
  --memory-usage 80%

# é›†æˆé€šçŸ¥æœåŠ¡
$CLAUDE_INSTALL_DIR/main.sh setup-notifications \
  --slack-webhook "https://hooks.slack.com/services/..." \
  --email "admin@company.com"
```

## ğŸ¤ ç¤¾åŒºå’Œæ”¯æŒ

### 1. è·å–å¸®åŠ©
- ğŸ“– **æ–‡æ¡£**ï¼šå®Œæ•´çš„å¼€å‘æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- ğŸ’¬ **è®¨è®º**ï¼šGitHub Discussions æŠ€æœ¯äº¤æµ
- ğŸ› **é—®é¢˜**ï¼šGitHub Issues é—®é¢˜åé¦ˆ
- ğŸ“§ **é‚®ä»¶**ï¼šclaude-switcher@company.com

### 2. è´¡çŒ®æŒ‡å—
```bash
# 1. Forké¡¹ç›®
git clone https://github.com/your-username/claude-model-switcher.git

# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/amazing-feature

# 3. ç¼–å†™æµ‹è¯•
./tests/test_runner.sh

# 4. æäº¤ä»£ç 
git commit -m "Add amazing feature"

# 5. åˆ›å»ºPR
git push origin feature/amazing-feature
```

### 3. ç‰ˆæœ¬å‘å¸ƒ
- **ä¸»ç‰ˆæœ¬**ï¼šæ¶æ„é‡å¤§å‡çº§
- **æ¬¡ç‰ˆæœ¬**ï¼šæ–°åŠŸèƒ½å¢åŠ 
- **ä¿®è®¢ç‰ˆæœ¬**ï¼šBugä¿®å¤å’Œä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š
- [Claude Code](https://claude.ai/code) - Anthropicå®˜æ–¹CLIå·¥å…·
- [Bash Testing Framework](https://github.com/bats-core/bats-core) - æµ‹è¯•æ¡†æ¶çµæ„Ÿ
- [ShellCheck](https://www.shellcheck.net/) - Shellè„šæœ¬è´¨é‡æ£€æŸ¥

---

<div align="center">

**Claude Model Switcher v5.0.0**  
è®©AIæ¨¡å‹ç®¡ç†å˜å¾—ç®€å•è€Œå¼ºå¤§ï¼ ğŸš€

[![Stars](https://img.shields.io/github/stars/your-repo/claude-model-switcher?style=social)](https://github.com/your-repo/claude-model-switcher)  
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)  
[![Version](https://img.shields.io/badge/version-5.0.0-green.svg)](CHANGELOG.md)

</div>